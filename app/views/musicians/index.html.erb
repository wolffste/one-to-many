<div class="text-center">
  <% if params[:search].present? == false || params[:search][:genre] == "" && params[:search][:instrument] == "" %>
    <h1>Hi,check out our artists!</h1>
  <%else%>
    <h1>We found some cool artists for you!</h1>
  <%end%>
</div>

<div class="container filter">
  <%= simple_form_for :search, url: bands_path, method: 'get' do |f| %>
<div class="row row d-flex align-items-end mb-4">
  <div class="col-5 form-group mb-0">

    <% if params[:search].present? == false || params[:search][:genre] == "" %>
      <%= f.input :genre, collection: Genre.all, input_html: { class: "beautiful-dropdown" }, prompt: "all genres", required: false, include_hidden: false, class: "form-control"  %>
    <% else %>
      <%= f.input :genre, collection: Genre.all, input_html: { class: "beautiful-dropdown" }, selected: "#{params[:search][:genre]}", prompt: Genre.find(params[:search][:genre]).name, required: false, include_hidden: false, class: "form-control"  %>
    <% end %>

  </div>
  <div class="col-5 form-group mb-0">

    <% if params[:search].present? == false || params[:search][:instrument] == "" %>
      <%= f.input :instrument, collection: Instrument.all, input_html: { class: "beautiful-dropdown"}, prompt: "all instruments", required: false, include_hidden: false, class: "form-control"  %>
    <% else %>
      <%= f.input :instrument, collection: Instrument.all, input_html: { class: "beautiful-dropdown"}, selected: "#{params[:search][:instrument]}", prompt: Instrument.find(params[:search][:instrument]).name, required: false, include_hidden: false, class: "form-control"  %>
    <% end %>

  </div>

  <div class="col-2 form-group">
    <%= f.button :submit, "Go!", class: "btn btn-primary w-100" %>
  </div>
</div>
<% end %>
</div>
<br>



<div class="container">
  <div class="cards">
    <% @musicians.each do |musician| %>
      <% if musician.birthday.present? %>
        <% age = Date.today.year - musician.birthday.year %>
      <% else %>
        <% age = 99 %>
      <% end %>
        <div class="musician-card">
          <% if musician.photo.attached? %>
          <%= link_to musician_path(musician), :action => 'go' do %>
            <div class="musician-pic" style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url('<%= cl_image_path musician.photo.key, height: 230, crop: :fill %>')">
            </div>
          <% end %>
          <% else %>
          <%= link_to musician_path(musician), :action => 'go' do %>
            <div class="musician-pic" style="background-image: linear-gradient(rgba(0,0,0,0), rgba(0,0,0,0.3)), url('<%= cl_image_path("a6fac407-95ce-4d45-b360-8330205ce210_l_svdjab", :height=>230, :gravity=>"west", :crop=>"fill") %>')">
            </div>
          <% end %>
          <% end %>
          <div class="card-row">
            <p>name (age):</p>
            <p><%= musician.username %> (<%= age %>)</p>
          </div>
          <hr class="no-margin">
          <div class="card-row">
            <p>instruments:</p>
            <p><%= musician.instrument.name %></p>
          </div>
          <hr class="no-margin">
          <div class="card-row">
            <p>instruments:</p>
            <p><%= musician.genre.name %></p>
          </div>
          <hr class="no-margin">
          <div class="card-row">
            <p>city:</p>
            <p><%= musician.city %></p>
          </div>
          <%= link_to "edit", edit_musician_path(musician) %>
        </div>
    <% end %>
  </div>
</div>
